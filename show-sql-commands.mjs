#!/usr/bin/env node

console.log('üöÄ Nutrisync Database Update Script');
console.log('=====================================');
console.log('');
console.log('Since the Supabase CLI is having migration conflicts,');
console.log('please run the following SQL commands manually in your Supabase dashboard:');
console.log('');
console.log('üìã SQL Commands to Execute:');
console.log('==========================');
console.log('');
console.log('-- Add onboarding_completed column');
console.log('ALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS onboarding_completed BOOLEAN DEFAULT FALSE;');
console.log('');
console.log('-- Add sex column');
console.log('ALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS sex TEXT CHECK (sex IN (\'male\', \'female\'));');
console.log('');
console.log('-- Mark existing users as onboarding completed');
console.log('UPDATE public.profiles SET onboarding_completed = TRUE WHERE onboarding_completed IS FALSE OR onboarding_completed IS NULL;');
console.log('');
console.log('-- Add comments');
console.log('COMMENT ON COLUMN public.profiles.onboarding_completed IS \'Tracks whether user has completed the onboarding wizard\';');
console.log('COMMENT ON COLUMN public.profiles.sex IS \'Biological sex for BMR calculation (Mifflin-St Jeor equation)\';');
console.log('');
console.log('-- Verify the changes');
console.log('SELECT user_id, full_name, onboarding_completed, sex, created_at FROM public.profiles ORDER BY created_at DESC LIMIT 5;');
console.log('');
console.log('üìù Instructions:');
console.log('1. Go to your Supabase dashboard');
console.log('2. Navigate to SQL Editor');
console.log('3. Copy and paste the SQL commands above');
console.log('4. Execute them one by one');
console.log('5. Verify the results');
console.log('');
console.log('‚úÖ After running these commands:');
console.log('- Current users will be marked as onboarding completed');
console.log('- New users will be redirected to onboarding');
console.log('- Sex field will be available for nutrition calculations');
console.log('');
console.log('üéâ Once completed, the onboarding system will be fully functional!');
